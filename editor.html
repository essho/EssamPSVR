<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงููุญุฑุฑ (Admin Panel)</title>
    
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/editor.css">

    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    
    <script src="js/core.js"></script>   <script src="js/editor.js"></script> </head>
<body>

    <div id="login-screen" class="fullscreen-overlay">
        <div class="login-box">
            <h2 style="color: #f1c40f;">ุชุณุฌูู ุงูุฏุฎูู</h2>
            <input type="text" id="username" placeholder="ุงุณู ุงููุณุชุฎุฏู">
            <input type="password" id="password" placeholder="ูููุฉ ุงููุฑูุฑ">
            <button class="btn-main" onclick="Editor.login()">ุฏุฎูู</button>
            <p id="login-msg" style="color: #e74c3c; font-size: 14px; margin-top: 10px;"></p>
        </div>
    </div>

    <div id="setup-modal">
        <div class="setup-content" dir="rtl">
            <h2 style="text-align: center; border-bottom: 2px solid #eee; padding-bottom: 10px;">ูุดุฑูุน ุฌุฏูุฏ</h2>
            
            <div class="form-group">
                <label>1. ุงุฎุชุฑ ุงูุตูุฑุฉ</label>
                <input type="file" id="setup-img-file" accept="image/*">
            </div>
            <div class="form-group">
                <label>2. ุงุณู ุงูููู (ููุญูุธ)</label>
                <input type="text" id="setup-img-name" placeholder="ุณูุธูุฑ ุชููุงุฆูุงู">
            </div>

            <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                <h4 style="margin: 0 0 10px 0;">ุฎูุงุฑุงุช ุงูุตูุช</h4>
                <div class="form-group">
                    <label>ููู ุงูุตูุช (ุงุฎุชูุงุฑู)</label>
                    <input type="file" id="setup-audio-file" accept="audio/*">
                </div>
                <div class="form-group">
                    <label>ุงูุชูุฑุงุฑ</label>
                    <select id="setup-audio-loop">
                        <option value="false">ูุฑุฉ ูุงุญุฏุฉ</option>
                        <option value="true">ุชูุฑุงุฑ ูุณุชูุฑ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ูุณุชูู ุงูุตูุช</label>
                    <input type="range" id="setup-audio-vol" min="0" max="1" step="0.1" value="1.0">
                </div>
            </div>

            <div style="background: #eafaf1; padding: 10px; border-radius: 5px; margin-bottom: 15px;">
                <h4 style="margin: 0 0 10px 0;">ุชูุงุนู ุงููุธุฑ (Fuse)</h4>
                <div class="form-group">
                    <label>ุชูุนููุ</label>
                    <select id="setup-fuse-enable">
                        <option value="true">ูุนู</option>
                        <option value="false">ูุง</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ุงูุฒูู (ms)</label>
                    <input type="number" id="setup-fuse-dur" value="1500">
                </div>
            </div>

            <button class="btn-main" style="width:100%" onclick="Editor.confirmSetup()">ุจุฏุก ุงูุชุตููู</button>
        </div>
    </div>

    <div id="editor-ui">
        <div id="toolbar">
            <span id="scene-title" style="font-weight:bold; margin-left:20px; color:#f1c40f;"></span>
            <button class="tool-btn" id="mode-add-link" onclick="Editor.setMode('link')">โ ุงูุชูุงู</button>
            <button class="tool-btn" id="mode-add-info" onclick="Editor.setMode('info')">โน๏ธ ูุนูููุฉ</button>
            <button class="tool-btn" onclick="Editor.setMode('select')">๐ ุชุญุฏูุฏ</button>
<div style="flex-grow: 1;"></div>

<button class="tool-btn" style="background:#8e44ad; margin-left:10px;" onclick="Editor.setStartView()">๐๏ธ ุชุนููู ูุจุฏุงูุฉ</button>

<button class="tool-btn save" onclick="Editor.exportJSON()">๐พ ุญูุธ JSON</button>
        </div>

        <div id="properties-panel" dir="rtl">
            <h3>ุชุนุฏูู ุงูุนูุตุฑ</h3>
            
            <div class="prop-row">
                <label>ุงูููุน</label>
                <select id="prop-visual-type" onchange="Editor.updateSelected()">
                    <option value="geometry">ูุฌุณู</option>
                    <option value="image">ุตูุฑุฉ</option>
                    <option value="char">ุฑูุฒ</option>
                </select>
            </div>

            <div id="group-geo" class="prop-row">
                <label>ุงูุดูู</label>
                <select id="prop-geo" onchange="Editor.updateSelected()">
                    <option value="sphere">ูุฑุฉ</option>
                    <option value="box">ููุนุจ</option>
                    <option value="cylinder">ุฃุณุทูุงูุฉ</option>
                    <option value="triangle">ูุซูุซ</option>
                </select>
            </div>

            <div id="group-img" class="prop-row" style="display:none">
                <label>ุฑุงุจุท ุงูุตูุฑุฉ</label>
                <input type="text" id="prop-img-src" value="./icons/arrow.png" onchange="Editor.updateSelected()">
            </div>

            <div id="group-char" class="prop-row" style="display:none">
                <label>ุงูุฑูุฒ</label>
                <input type="text" id="prop-char" value="โก๏ธ" onchange="Editor.updateSelected()">
            </div>

            <div class="prop-row">
                <label>ุงูููู</label>
                <input type="color" id="prop-color" value="#ffffff" style="height:40px; width:100%;" onchange="Editor.updateSelected()">
            </div>

            <div class="prop-row">
                <label>ุงูุญุฌู</label>
                <input type="text" id="prop-scale" value="1 1 1" onchange="Editor.updateSelected()">
            </div>

            <hr>

            <div class="prop-row" id="prop-target-div">
                <label>ุงูุตูุฑุฉ ุงููุฏู</label>
                <input type="text" id="prop-target" placeholder="./panoramas/scene-2.jpg" onchange="Editor.updateSelected()">
            </div>

            <div class="prop-row" id="prop-text-div">
                <label>ุงููุต</label>
                <textarea id="prop-text" rows="4" style="width:100%" onchange="Editor.updateSelected()"></textarea>
            </div>

            <button onclick="Editor.deleteSelected()" style="background:#c0392b; color:white; width:100%; margin-top:20px; padding:10px; border:none; border-radius:4px; cursor:pointer;">ุญุฐู</button>
            <button onclick="Editor.closePanel()" style="background:#95a5a6; color:white; width:100%; margin-top:5px; padding:8px; border:none; border-radius:4px; cursor:pointer;">ุฅุบูุงู</button>
        </div>

        <div id="status-bar">ุงูุญุงูุฉ: <span id="current-mode">ุงูุชุธุงุฑ</span></div>
    </div>

    <a-scene embedded style="height: 100vh; width: 100vw;" cursor="rayOrigin: mouse" raycaster="objects: .clickable">
        <a-assets><img id="preview-blob" src=""></a-assets>
        
        <a-sky id="sky" class="clickable"></a-sky>
        <a-entity id="hotspots-container"></a-entity>
        <a-camera position="0 1.6 0" look-controls="reverseMouseDrag: false"></a-camera>
    </a-scene>

    <script>
        window.onload = function() {
            if(Editor && Editor.initFileListeners) {
                Editor.initFileListeners();
            }
        };
    </script>
</body>
</html>